<class
    name = "asset_msg"
    signature = "5"
    title = "assets management protocol"
    script = "zproto_codec_c"
    package_dir = "."
    include = "czmq.h"
    >

<!-- this includes our Eaton license into the generated header and source files -->
<include filename = "license.xml" />

<!-- This is here for a purpose. DO CHANGE it if back-compatibility breaking change occurs -->
<define name = "VERSION" value = "1.0" />

<!-- Elements messages - elements are everything except devices -->

<message name = "element" id = "1">
Structure describing asset element
    <field name = "name" type = "string">Name of the element</field>
    <field name = "location" type = "number" size = "4">ID of the parent element</field>
    <field name = "location_type" type = "number" size = "1">Type of the parent element, defined in asset_type</field>
    <field name = "type" type = "number" size = "1">Type of the element, defined in asset_type</field>
    <field name = "ext" type = "dictionary">Hash map of extended attributes</field>
</message>

<message name = "device" id = "11">
Structure describing asset device
    <field name = "device_type" type = "string">Type of the device, freeform string not the thing from asset_type</field>
    <field name = "groups" type = "strings">List of IDs of groups device belongs to</field>
    <field name = "powers" type = "strings">List of link messages in form src_socket:src_id:dst_socket:dst_id</field>
    <field name = "ip" type = "string">IP of the device</field>
    <field name = "hostname" type = "string">Hostname</field>
    <field name = "fqdn" type = "string">Fully qualified domain name</field>
    <field name = "mac" type = "string">MAC address of the device</field>
    <field name = "msg" type = "msg">Element that we are extending to the device</field>
</message>

<message name = "get_element" id = "2">
Ask for specific element
    <field name = "element_id" type = "number" size = "4">Unique ID of the asset element</field>
    <field name = "type" type = "number" size = "1">Type of the element defined in asset_type (includes devices)</field>
</message>

<message name = "return_element" id = "3">
Returns element we were asked for
    <field name = "element_id" type = "number" size = "4">Unique ID of the asset element</field>
    <field name = "msg" type = "msg">Element (or device) to be delivered</field>
</message>

<message name = "update_element" id = "4">
Updates element or device
    <field name = "element_id" type = "number" size = "4">Unique ID of the asset element</field>
    <field name = "msg" type = "msg">Element (or device) to be updated</field>
</message>

<message name = "insert_element" id = "5">
Insert element or device
    <field name = "msg" type = "msg">Element (or device) to be inserted</field>
</message>

<message name = "delete_element" id = "6">
Deletes element or device
    <field name = "element_id" type = "number" size = "4">Unique ID of the element to be deleted</field>
    <field name = "type" type = "number" size = "1">Type of the device, defined in asset_type</field>
</message>

<message name = "ok" id = "7">
Message from database that everything was processed successfully.
    <field name = "element_id" type = "number" size = "4">Unique ID of the element that was proccessed</field>
</message>

<message name = "fail" id = "8">
Message from database that something went wrong.
    <field name = "error_id" type = "number" size = "1">Type of the error, enum defined in persistence header file</field>
</message>

<message name = "get_elements" id = "9">
Ask for all elements of specific type
    <field name = "type" type = "number" size = "1">Type of the element, defined in in asset_type</field>
</message>

<message name = "return_elements" id = "10">
Returns elements we were asked for
    <field name = "element_ids" type = "dictionary">Unique IDs of the asset element (as a key) mapped to the elements name (as a value)</field>
</message>

</class>
